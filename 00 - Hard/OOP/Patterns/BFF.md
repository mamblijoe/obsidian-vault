### **Презентация-доклад: BFF (Backend for Frontend)**

---

## 1. **ПАТТЕРН BFF**

---
## 2. **BACKEND FOR FRONTEND A.K.A BEST FRIENDS FOREVER**

Современные веб-приложения состоят из двух ключевых частей:
* Фронтенд — интерфейс, с которым взаимодействует пользователь.
* Бэкенд — "невидимая" часть, отвечающая за логику, данные и интеграции.

Бэкенд может быть построен по-разному:
* Монолит — единое приложение, где все функции связаны.
* Микросервисы — независимые сервисы, каждый со своей логикой и API.

**Проблема**:
В микросервисной архитектуре фронтенду приходится работать с множеством API, что:
* Усложняет разработку (нужно знать все интерфейсы).
* Создаёт жёсткую связь между фронтендом и бэкендом.
* Замедляет работу из-за множества запросов.

**Решение**:
Паттерн Backend for Frontend (BFF) — промежуточный слой, который:
* Унифицирует API для фронтенда.
* Оптимизирует запросы к микросервисам.
* Упрощает поддержку и развитие приложения.



---
## 3. **Основные концепции BFF**

- Разделение backend-логики между универсальным API и специфичным для клиента backend
- Различие между традиционной архитектурой API и BFF
- Взаимодействие BFF с различными клиентами (Web, Mobile, IoT)

---
## 4. **КОГДА ИСПОЛЬЗОВАТЬ BFF**

- Мобильные приложения: BFF может адаптировать ответы специально для мобильных клиентов, оптимизируя полезные данные для минимизации задержек и улучшения пользовательского опыта.
- Одностраничные приложения (SPA): Различные SPA могут иметь свои собственные BFF, что позволяет использовать настраиваемые API, соответствующие их конкретным потребностям, что приводит к повышению производительности и эффективности.
- Множественные типы клиентов: Организации, обслуживающие разные типы клиентов (например, веб, мобильные, IoT), могут создавать несколько BFF, каждый из которых предназначен для удовлетворения уникальных требований своих клиентов.
- Быстрое прототипирование: BFF позволяют командам frontend быстро итерировать и тестировать новые функции, не влияя на backend, ускоряя процесс разработки.  
---
## 5. ВАРИАНТ БЕЗ BFF

**Проблемы:**

- Фронтенд зависит от всех микросервисов.
- Сложность масштабирования и тестирования.
- Избыточные данные в API (клиент получает лишнее).

**Преимущества API Gateway:**

- Балансировка нагрузки.
- Единая точка аутентификации.
- Маршрутизация запросов.

**Недостатки:**

- Ограниченная гибкость для разных клиентов.
- Централизация рисков (например, ошибки в Gateway влияют на всех).

---
## 6. **ПОЛУЧАЕМЫЕ ПРЕИМУЩЕСТВА**

- Управление микросервисами: API Gateway может упростить архитектуру, предоставляя единую точку входа для различных микросервисов, упрощая управление и защиту сложных систем.
- Аналитика и мониторинг: API Gateway может собирать метрики и журналы для входящих запросов, предоставляя информацию о шаблонах использования и потенциальных проблемах.
- Балансировка нагрузки: распределяет входящие запросы между несколькими экземплярами служб для оптимизации производительности и обеспечения высокой доступности.
- Аутентификация и безопасность. Применяет меры безопасности, такие как ключи API или токены OAuth, для защиты серверных служб.
- Маршрутизация запросов: направляет входящие запросы в соответствующие микросервисы на основе URL-адреса запроса и параметров.
- Масштабирование API / инфраструктуры / ресурсов
- Разграничение по стендам
---
## 7. ИЗДЕРЖКИ

* масштабирование
* централизация на клиенте (ui, тесты)
* избыточный api контракт
* Ограниченная гибкость разработки

---

## 8. ВАРИНТ С BFF

**Что даёт BFF?**

1. **Упрощение фронтенда:**
    - Единый API вместо множества микросервисов.
    - Оптимизация данных (только то, что нужно клиенту).
2. **Гибкость:**
    - Разные BFF для Web, Mobile и других клиентов.
    - Независимость команд (фронтенд и бэкенд развиваются отдельно).
3. **Безопасность и производительность:**
    - Снижение нагрузки на клиент (меньше запросов).
    - Возможность кэширования и предварительной обработки данных.

**Издержки:**

- Дублирование кода (например, логика для Web и Mobile).
- Усложнение инфраструктуры (дополнительный слой).
- Больше работы для frontend-разработчиков (они участвуют в поддержке BFF).

---

## 9. ЧТО ПОЛУЧАЕМ

* Единый язык на клиенте и BFF.
* Оптимизация работы с API (для конкретного клиента) (подпункты проговорить)
	* “Единый” источник контрактов
	* Тестирование API
* Уменьшение нагрузки на клиент и сервер
* Независимость frontend-команд
* Улучшенная безопасность
* Оптимизированная обработка данных (подпункты проговорить)
	* Агрегация
	* Сокрытие данных
	* Кэширование и предобработка данных на стороне BFF
	* Фильтрация данных
	* Моки
* Разделение зон ответственности (домен, Api / UI)
* Гибкость и масштабируемость BFF

---
## 10. **ИЗДЕРЖКИ**

- Усложнение инфраструктуры
- Поддержка и масштабирование BFF
- Дублирование логики между разными BFF
- Увеличение объема работ на frontend разработчиков

---

## 11. ИТОГИ

1. **BFF — это мощный паттерн** для сложных приложений с множеством клиентов.
2. **Плюсы:**
    - Упрощение фронтенда.
    - Гибкость и масштабируемость.
    - Лучшая производительность и безопасность.
3. **Минусы:**
    - Дополнительные затраты на поддержку.
    - Не всегда нужен (для простых приложений избыточен).
        

**Заключение:**  
BFF — это не просто "ещё один слой", а стратегическое решение для проектов, где важны:

- Скорость разработки.
- Адаптивность под разные платформы.
- Эффективное управление микросервисами.