>[!success] Разумные причины выполнения рефакторинга
>* Код повторяется
>* Метод слишком велик
>* Цикл слишком велик или имеет глубокую вложенность
>* Класс имеет плохую связность
>* Интерфейс класса не формирует согласованную абстракцию
>* Метод принимает слишком много параметров
>* Отдельные части класса меняет независимо от других частей
>* При изменении программы приходится параллельно менять несколько классов
>* Приходится менять параллельно несколько иерархий наследования
>* Приходится менять параллельно несколько блоков `case`
>* Родственные элементы данных, используемые вместе, не организован в классы
>* Метод использует больше параметра чужого класса, чем своего
>* Элементарный тип данных перегружен
>* Класс имеет слишком ограниченную функциональность
>* По цепи методов передаются бродячие данные
>* Прокси-объект ничего не делает
>* Один класс слишком много знает о другом
>* Метод имеет не удачное имя
>* Лишние публичные методы и свойства
>* Подкласс использует мало методов или свойств от наследования
>* Сложный код объясняется с помощью комментариев
>* Код содержит глобальные переменные
>* Перед вызовом метода выполняется подготовительный код
>* Программа содержит код который когда-нибудь может понадобиться

>[!danger] Плохие причины рефакторинга
>* Не рассматривайте рефакторинг как оправдание написание плохого кода с намерением исправить его позднее
>* Не рассматривайте рефакторинг как способ избежать переписывание кода

## Безопасный рефакторинг

* Сохраняйте первоначальный код
* Ограничивайте объем отдельных видов рефакторинга
* Выполняйте отдельные виды рефакторинга по одному за раз
* Составьте список действий которые хотите предпринять
* Составьте список видов рефакторинга которые следует выполнить позже
* Часто создавайте контрольные точки
* Выполняйте регрессивное-тестирование
* Создавайте дополнительные тесты
* Выполняйте обзоры измненеий
* Изменяйте подход в зависимости от рискованности рефакторинга

## Стратегии рефакторинга

* Выполняйте рефакторинг при создании новых методов
* Выполняйте рефакторинг при создании новых классов
* Выполняйте рефакторинг при исправлении дефектов
* Выполняйте рефакторинг модулей подтверженных ошибках
* Выполняйте рефакторинг сложных модулей

>[!tip] Ключевые моменты
>* Изменения программы неизбежны как во время первоначальной разработки, так и после выпуска первой версии.
>* Изменения могут приводить как к улучшению, так и к ухудшению ПО. Главное Правило Эволюции ПО заключается в том, что при эволюции кода внутреннее качество программы должно повышаться.
>* Одним из условий успешности рефакторинга является пристальное внимание к многочисленным предупреждающим знакам —  «запахам», указывающим на необходимость рефакторинга.
>* Другое условие — изучение многих конкретных видов рефакторинга.
>* Заключительным условием успешности рефакторинга является следование стратегии безопасного рефакторинга. Одни подходы к  рефакторингу лучше, а другие хуже.
>* Рефакторинг во время разработки — самая благоприятная возможность улучшения программы и внесения в нее всех изменений, которые вам так или иначе захочется внести позднее. Используйте эту возможность!
