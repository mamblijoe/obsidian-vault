## Область видимости
>[!tip] Область видимости - система четко определенных правил определяющих какие переменные доступны для конкретной команды и как она поступает обнаруживая переменные с одинаковыми именами. Она определяется на этапе разбора / компиляции.

## Компиляция кода

>[!tip] Компиляция
>1. Разбиение на лексемы / лексический разбор
>	* Строка символов разбивается на лексемы 
>2. Разбор
>	* поток лексем преобразуется в AST
>3. Генерирование кода
>	* AST преобразуется в исполняемый код

## Обработка программ JS

>[!tip] Обработка программ JS состоит из 2 фаз.
>* Разбор / компиляция
>* Выполнение

>[!tip] Спецификация JS не требует компиляции явно, она требует поведения, которое по сути реально только при подходе "компиляция с последующим выполнением".

## Поведение доказывающие наличие "компиляция с последующим выполнением"

>[!tip ] Синтаксические ошибки
>```js
>var greeting = "Hello";
>console.log(greeting);
>//Uncaught SyntaxError: Unexpected token '.'
>greeting = ."Hi"; 
>```
>Программа ничего не выводит, а вместо этого выдает ошибку `SyntaxError`, она происходит после корректно сформированного `console.log()`.
>**Движок JS может узнать об ошибке в 3 строке, перед выполнение 1 и 2 строк только в одном случае: если движок JS сначала разбирает всю программу до того, как будет выполнена любая из ее частей.**

>[!tip ] Ранние ошибки
>```js
>console.log("Howdy");
>sayHello("Hello", "Hi");
>// Uncaught SyntaxError: Duplicate parameter name not allowed in this context
>function sayHello(hello, hello) { 
>    "use strict";
>    console.log(hello);
>}
>```
>Сообщение `Howdy` не выведется, несмотря на корректный `console.log()` до ошибки. 
>`'use strict'` запрещает функции с одинаковыми именами аргументов.
>Данная ошибка не является синтаксической, но в строгом режиме спецификация требует выдавать раннюю ошибка до начала выполнения.
>**Движок JS сможет это сделать только полностью разобрав программу до ее выполнения.**

>[!tip ] Поднятие
>```js
>function hello () {
>    var greeting = "hello";
>    {
>        // Script snippet #3:4 Uncaught ReferenceError: Cannot access 'greeting' before initialization
>        greeting = "hi";
>        let greeting = "howdy";
>        console.log(greeting);
>    }
>}
>hello();
>```
>С технической точки зрения ошибка происходит из за того, что команда `greeting = "hi";` обращается к переменной `greeting` слишком рано - этот конфликт обозначается сокращение `TDZ`
>**Движок JS сможет это сделать только полностью разобрав программу до ее выполнения**


## Изменение области видимости во время выполнения

>[!danger] `eval`
>```js
>function hello () {
>   eval("var name = 'Name'");
>   console.log('==>',name);//==>Name
>}
>hello(); 
>```

>[!danger] `with`
>```js
>var obj = { name: 'Name'};
>with (obj) {
>    console.log('==>', name);    //==>Name
>}
>```
